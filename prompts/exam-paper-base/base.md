# 试卷结构化基础提示词（精简版）

## JSON标准结构

```json
{
  "info": {
    "title": "试卷标题",
    "subject": "学科",
    "grade": "年级",
    "semester": "学期",
    "year": "学年",
    "time": "考试时长",
    "score": "总分"
  },
  "sections": [
    {
      "no": "一",
      "title": "大题标题",
      "score": "分值",
      "desc": "大题说明（可选）",
      "qs": [
        {
          "no": "1",
          "prompt": "题目要求",
          "content": "题目内容",
          "type": "题型",
          "score": "分值",
          "imgs": [],
          "opts": [],
          "subqs": []
        }
      ]
    }
  ]
}
```

---

## 核心字段说明

### section（大题）
- `no`: 序号（一、二、三...）
- `title`: 标题
- `score`: 总分
- `desc`: 大题说明文字（可选，如主题描述、闯关说明、趣味引导等）
- `qs`: 题目数组

### question（题目）
- `no`: 题号
- `prompt`: 题目要求/引导语（如"根据拼音写词语"、"直接写出得数"）
- `content`: 题目主体内容（完整段落、材料、文字等，没有则为空）
- `type`: 题型
- `score`: 分值
- `desc`: 题目说明文字（可选，如温馨提示、趣味引导、注意事项等）
- `imgs`: 图片URL数组
- `opts`: 选项数组（仅选择题使用）
- `subqs`: 子题数组（需要拆分时使用）

### subquestion（子题）
- `no`: 子题号（如"1.1"、"1.2"）
- `prompt`: 子题要求（可选）
- `content`: 子题内容
- `type`: 题型
- `score`: 分值（可选）
- `imgs`: 图片数组
- `opts`: 选项数组

### option（选项）
- `id`: 选项标识（根据试卷实际格式：A/B/C 或 ①/②/③ 或 1/2/3 等）
- `txt`: 选项文字
- `img`: 选项图片URL（可选）

---

## 基础规则

### 规则1：prompt vs content

**prompt**（题目要求）：
- 题目的"要求说明"、"引导语"
- 例："根据拼音写词语"、"选择正确答案"、"直接写出得数"
- 如果没有单独的要求说明，则为空字符串

**content**（题目内容）：
- 题目的"主体内容"、"完整文字"
- 例：段落、材料、情境描述、完整题干
- 如果没有主体内容，则为空字符串

**判断原则：**
- 如果是"做什么" → prompt
- 如果是"内容是什么" → content

---

### 规则2：选择题结构

**使用 opts 数组，不是 subqs：**

```json
{
  "no": "1",
  "prompt": "选择正确答案。",
  "content": "下列哪个是质数？",
  "type": "选择",
  "opts": [
    {"id": "A", "txt": "4", "img": ""},
    {"id": "B", "txt": "5", "img": ""},
    {"id": "C", "txt": "6", "img": ""}
  ]
}
```

**选项标识（id）：**
- 根据试卷实际使用的格式
- 常见：A/B/C、①/②/③、1/2/3、甲/乙/丙

**多选题标注：**
```json
{"type": "选择（多选）"}
```

---

### 规则3：子题拆分（subqs）

**何时拆分：**
- 一道题包含多个需要**分别作答**的部分
- 判断标准：学生需要给出多个独立答案

**拆分结构：**
```json
{
  "no": "1",
  "prompt": "题目要求",
  "content": "主体内容（可选）",
  "type": "题型",
  "score": "总分",
  "subqs": [
    {"no": "1.1", "prompt": "", "content": "子题1", "type": "题型"},
    {"no": "1.2", "prompt": "", "content": "子题2", "type": "题型"}
  ]
}
```

**注意：**
- 子题编号：父题号.序号（1.1, 1.2, 1.3...）
- 父题：保留题目要求和主体内容
- 子题：每个独立作答的部分

---

### 规则4：图片处理

**图片位置：**
- 题目配图 → `question.imgs`
- 选项配图 → `opts[].img`
- 子题配图 → `subqs[].imgs`

**图片位置标注规则：**

**需要使用 `[img:索引]` 的情况：**
- 图片嵌入在题干文字中间时
- 例如："[img:0]把这些苹果平均分给2个小朋友..."
- 索引从 0 开始，对应 imgs 数组的顺序

**不需要使用 `[img:索引]` 的情况：**
- 选项中的图片（直接用 `opts[].img`）
- 独立的插图/配图（题目上方或下方的配图）
- 作图题的底图
- 操作题、测量题的图
- 这些情况只需要图片URL在 imgs 数组中即可

**示例对比：**

✅ 需要位置标注（图片在文字中）：
```json
{
  "content": "[img:0]把这些苹果平均分给2个小朋友，每人分几个？",
  "imgs": ["https://...苹果.png"]
}
```

✅ 不需要位置标注（独立配图）：
```json
{
  "content": "根据上图，计算长方形的面积。",
  "imgs": ["https://...长方形.png"]
}
```

✅ 不需要位置标注（选项图片）：
```json
{
  "opts": [
    {"id": "A", "txt": "", "img": "https://...图A.png"},
    {"id": "B", "txt": "", "img": "https://...图B.png"}
  ]
}
```

**要求：**
- 完整保留OCR识别的图片URL
- 不要修改、截断、省略
- 使用数组格式：`["url1", "url2"]`
- **仅在图片嵌入文字中时使用 [img:索引]**

---

### 规则5：格式保留（最高优先级）

**所有格式化内容必须100%原样保留：**

- **数学公式（LaTeX）**：`$ ... $` 内的所有内容
- **拼音**：完整保留（如 shān pō）
- **英文**：大小写、拼写保持原样
- **标点符号**：原样保留

**禁止转换：**
- ❌ 不要把 `$ \\div $` 改成 `÷`
- ❌ 不要把 `$ \\times $` 改成 `×`
- ❌ 不要把 `$ \\frac{1}{2} $` 改成 `1/2`

---

### 规则6：desc 字段的使用

**desc 字段用于记录说明性、提示性内容，不是题目本身：**

**section.desc 用于：**
- 大题主题描述
- 闯关情境说明
- 单元背景介绍
- 答题注意事项

**question.desc 用于：**
- 温馨提示
- 趣味引导语
- 注意事项
- 小贴士

**示例1：大题趣味引导**
```json
{
  "no": "三",
  "title": "知识之窗，仔细阅读思考再填空",
  "score": "19分",
  "desc": "亲爱的同学们，校园里文化体验周开始啦！在这里，我们能挑战识字关、学习看事创作、还能体验中医药知识的小秘密。让我们一起在答题之旅，涌涌春景气的活动主题大家想吧！",
  "qs": [...]
}
```

**示例2：题目温馨提示**
```json
{
  "no": "1",
  "prompt": "",
  "content": "草药展示台摆着一个正方体形状的草药标本盒，在下面括号内填上三张照片分别是在牛奶盒的哪个方向拍的。（填"前""上"或"右"）",
  "type": "填空",
  "score": "1分",
  "desc": "提示：观察标本盒的位置和角度。",
  "imgs": [...]
}
```

**注意：**
- desc 是可选字段，没有则省略
- desc 不是题目内容，不影响作答

---

## 输出要求

1. **直接输出完整JSON**，无需解释
2. **严格遵守结构规范**
3. **完整性**：所有题目、选项、图片URL都要包含
4. **格式保留**：LaTeX、拼音、英文原样保留
5. **JSON规范**：注意逗号、引号、缩进，确保可被解析

---

## 字段默认值

- 字符串字段无内容 → `""`
- 数组字段无内容 → `[]`
- 不要遗漏任何必填字段